{{- if .Values.secrets.create }}
apiVersion: v1
kind: Secret
metadata:
  name: {{ include "persons-finder.fullname" . }}-secrets
  labels:
    {{- include "persons-finder.labels" . | nindent 4 }}
type: Opaque
data:
  {{- if .Values.secrets.OPENAI_API_KEY }}
  OPENAI_API_KEY: {{ .Values.secrets.OPENAI_API_KEY | b64enc | quote }}
  {{- else }}
  # OPENAI_API_KEY must be provided via values or created manually
  # To create manually:
  # kubectl create secret generic {{ include "persons-finder.fullname" . }}-secrets \
  #   --from-literal=OPENAI_API_KEY=your-api-key-here
  {{- end }}
{{- end }}
